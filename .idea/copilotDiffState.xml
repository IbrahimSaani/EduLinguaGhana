<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/edulinguaghana/AlphabetActivity.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/edulinguaghana/AlphabetActivity.java" />
              <option name="originalContent" value="package com.edulinguaghana;&#10;&#10;import androidx.annotation.NonNull;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.app.ActivityCompat;&#10;import androidx.core.content.ContextCompat;&#10;&#10;import android.Manifest;&#10;import android.content.Intent;&#10;import android.content.pm.PackageManager;&#10;import android.media.MediaPlayer;&#10;import android.os.Bundle;&#10;import android.speech.RecognizerIntent;&#10;import android.speech.tts.TextToSpeech;&#10;import android.view.animation.Animation;&#10;import android.view.animation.AnimationUtils;&#10;import android.widget.ImageView;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.card.MaterialCardView;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#10;import com.google.android.material.progressindicator.LinearProgressIndicator;&#10;&#10;import java.util.ArrayList;&#10;import java.util.Locale;&#10;&#10;public class AlphabetActivity extends AppCompatActivity {&#10;&#10;    private TextView tvLanguageTitle, tvLetter, tvLetterWord, tvLetterShadow;&#10;    private MaterialButton btnPrev, btnNext, btnSpeak;&#10;    private FloatingActionButton btnBack;&#10;    private LinearProgressIndicator progressBar;&#10;    private MaterialCardView letterCard, languageCard;&#10;    private ImageView decorativeShape1, decorativeShape2, decorativeShape3, decorativeShape4;&#10;    private ImageView progressIcon, languageIcon, modeIcon;&#10;&#10;    private String languageCode;&#10;    private String languageName;&#10;    private String mode;           // &quot;recital&quot; or &quot;practice&quot;&#10;    private boolean isRecitalMode;&#10;&#10;    private String[] letters;&#10;    private String[] words;&#10;    private int currentIndex = 0;&#10;&#10;    // --- ALPHABET &amp; WORD DATA ---&#10;    private final String[] lettersEnFr = {&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;,&quot;F&quot;,&quot;G&quot;,&quot;H&quot;,&quot;I&quot;,&quot;J&quot;,&quot;K&quot;,&quot;L&quot;,&quot;M&quot;,&quot;N&quot;,&quot;O&quot;,&quot;P&quot;,&quot;Q&quot;,&quot;R&quot;,&quot;S&quot;,&quot;T&quot;,&quot;U&quot;,&quot;V&quot;,&quot;W&quot;,&quot;X&quot;,&quot;Y&quot;,&quot;Z&quot;};&#10;    private final String[] wordsEn = {&quot;Apple&quot;, &quot;Ball&quot;, &quot;Cat&quot;, &quot;Dog&quot;, &quot;Elephant&quot;, &quot;Fish&quot;, &quot;Goat&quot;, &quot;Hat&quot;, &quot;Ice Cream&quot;, &quot;Jug&quot;, &quot;Kite&quot;, &quot;Lion&quot;, &quot;Monkey&quot;, &quot;Nose&quot;, &quot;Orange&quot;, &quot;Pen&quot;, &quot;Queen&quot;, &quot;Rainbow&quot;, &quot;Sun&quot;, &quot;Tiger&quot;, &quot;Umbrella&quot;, &quot;Violin&quot;, &quot;Watch&quot;, &quot;Xylophone&quot;, &quot;Yoyo&quot;, &quot;Zebra&quot;};&#10;    private final String[] wordsFr = {&quot;Avion&quot;, &quot;Bateau&quot;, &quot;Chien&quot;, &quot;Dauphin&quot;, &quot;Éléphant&quot;, &quot;Fleur&quot;, &quot;Girafe&quot;, &quot;Hibou&quot;, &quot;Île&quot;, &quot;Jardin&quot;, &quot;Kangourou&quot;, &quot;Lune&quot;, &quot;Maison&quot;, &quot;Nuage&quot;, &quot;Oiseau&quot;, &quot;Poisson&quot;, &quot;Quatre&quot;, &quot;Robot&quot;, &quot;Soleil&quot;, &quot;Train&quot;, &quot;Uniforme&quot;, &quot;Vache&quot;, &quot;Wagon&quot;, &quot;Xylophone&quot;, &quot;Yaourt&quot;, &quot;Zèbre&quot;};&#10;    private final String[] lettersAk = {&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;E&quot;, &quot;Ɛ&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;Ɔ&quot;, &quot;P&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;W&quot;, &quot;Y&quot;};&#10;    private final String[] wordsAk = {&quot;Akokɔ&quot;, &quot;Borɔdeɛ&quot;, &quot;Duku&quot;, &quot;Etuo&quot;, &quot;Ɛmo&quot;, &quot;Forosie&quot;, &quot;Gari&quot;, &quot;Hweaa&quot;, &quot;Isu&quot;, &quot;Kube&quot;, &quot;Lɔre&quot;, &quot;Maame&quot;, &quot;Nsuo&quot;, &quot;Odwan&quot;, &quot;Ɔkraman&quot;, &quot;Pono&quot;, &quot;Prako&quot;, &quot;Sika&quot;, &quot;Tɛkyerɛma&quot;, &quot;Uniwesiti&quot;, &quot;Wura&quot;, &quot;Yareɛ&quot;};&#10;    private final String[] lettersEe = {&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;Ɖ&quot;, &quot;E&quot;, &quot;Ɛ&quot;, &quot;F&quot;, &quot;Ƒ&quot;, &quot;G&quot;, &quot;Ɣ&quot;, &quot;H&quot;, &quot;X&quot;, &quot;I&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;Ŋ&quot;, &quot;O&quot;, &quot;Ɔ&quot;, &quot;P&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;Ʋ&quot;, &quot;W&quot;, &quot;Y&quot;, &quot;Z&quot;};&#10;    private final String[] wordsEe = {&quot;Ati&quot;, &quot;Baka&quot;, &quot;Dadi&quot;, &quot;Ɖevi&quot;, &quot;Eku&quot;, &quot;Ɛfu&quot;, &quot;Fia&quot;, &quot;Ƒo&quot;, &quot;Gbe&quot;, &quot;Ɣe&quot;, &quot;Ha&quot;, &quot;Xɔ&quot;, &quot;Iŋk&quot;, &quot;Kafu&quot;, &quot;Lá&quot;, &quot;Me&quot;, &quot;Nɔ&quot;, &quot;Ŋkɔ&quot;, &quot;Oyi&quot;, &quot;Ɔli&quot;, &quot;Papa&quot;, &quot;Rɛdio&quot;, &quot;Sɔ&quot;, &quot;Tɔ&quot;, &quot;Unilɔ&quot;, &quot;Vɔ&quot;, &quot;Ʋu&quot;, &quot;Wó&quot;, &quot;Yevú&quot;, &quot;Zã&quot;};&#10;    private final String[] lettersGaa = {&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;E&quot;, &quot;Ɛ&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;Ŋ&quot;, &quot;O&quot;, &quot;Ɔ&quot;, &quot;P&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;Y&quot;, &quot;Z&quot;};&#10;    private final String[] wordsGaa = {&quot;Akekā&quot;, &quot;Blɔfo&quot;, &quot;Dade&quot;, &quot;Enɔ&quot;, &quot;Ɛlɛ&quot;, &quot;Fio&quot;, &quot;Gbekɛ&quot;, &quot;Hejɔ&quot;, &quot;Iŋk&quot;, &quot;Klala&quot;, &quot;Lala&quot;, &quot;Maŋ&quot;, &quot;Nuu&quot;, &quot;Ŋmã&quot;, &quot;Okpɔtɔ&quot;, &quot;Ɔɔso&quot;, &quot;Papa&quot;, &quot;Sohaa&quot;, &quot;Tee&quot;, &quot;Wala&quot;, &quot;Vinɔ&quot;, &quot;Wɔ&quot;, &quot;Yoomo&quot;, &quot;Zigidi&quot;};&#10;&#10;    private TextToSpeech tts;&#10;    private MediaPlayer mediaPlayer;&#10;&#10;    private static final int REQ_CODE_SPEECH_INPUT = 100;&#10;    private static final int REQ_CODE_RECORD_AUDIO = 200;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_alphabet);&#10;&#10;        // Initialize text views&#10;        tvLanguageTitle = findViewById(R.id.tvLanguageTitle);&#10;        tvLetter = findViewById(R.id.tvLetter);&#10;        tvLetterWord = findViewById(R.id.tvLetterWord);&#10;        tvLetterShadow = findViewById(R.id.tvLetterShadow);&#10;&#10;        // Initialize buttons&#10;        btnPrev = findViewById(R.id.btnPrev);&#10;        btnNext = findViewById(R.id.btnNext);&#10;        btnBack = findViewById(R.id.btnBack);&#10;        btnSpeak = findViewById(R.id.btnSpeak);&#10;&#10;        // Initialize other views&#10;        progressBar = findViewById(R.id.progressBar);&#10;        letterCard = findViewById(R.id.letterCard);&#10;        languageCard = findViewById(R.id.languageCard);&#10;&#10;        // Initialize decorative elements&#10;        decorativeShape1 = findViewById(R.id.decorativeShape1);&#10;        decorativeShape2 = findViewById(R.id.decorativeShape2);&#10;        decorativeShape3 = findViewById(R.id.decorativeShape3);&#10;        decorativeShape4 = findViewById(R.id.decorativeShape4);&#10;        progressIcon = findViewById(R.id.progressIcon);&#10;        languageIcon = findViewById(R.id.languageIcon);&#10;        modeIcon = findViewById(R.id.modeIcon);&#10;&#10;&#10;        languageCode = getIntent().getStringExtra(&quot;LANG_CODE&quot;);&#10;        languageName = getIntent().getStringExtra(&quot;LANG_NAME&quot;);&#10;        mode = getIntent().getStringExtra(&quot;MODE&quot;);&#10;&#10;        if (languageName == null) languageName = &quot;Unknown&quot;;&#10;        if (mode == null) mode = &quot;practice&quot;;&#10;&#10;        isRecitalMode = mode.equals(&quot;recital&quot;);&#10;&#10;        tvLanguageTitle.setText(&quot;Language: &quot; + languageName);&#10;        btnSpeak.setText(isRecitalMode ? &quot;Repeat&quot; : &quot;Practice&quot;);&#10;&#10;        // --- DYNAMICALLY SET ALPHABET &amp; WORDS ---&#10;        switch (languageCode) {&#10;            case &quot;ak&quot;:&#10;                letters = lettersAk;&#10;                words = wordsAk;&#10;                break;&#10;            case &quot;ee&quot;:&#10;                letters = lettersEe;&#10;                words = wordsEe;&#10;                break;&#10;            case &quot;gaa&quot;:&#10;                letters = lettersGaa;&#10;                words = wordsGaa;&#10;                break;&#10;            case &quot;fr&quot;:&#10;                letters = lettersEnFr;&#10;                words = wordsFr;&#10;                break;&#10;            default: // &quot;en&quot; and any other case&#10;                letters = lettersEnFr;&#10;                words = wordsEn;&#10;                break;&#10;        }&#10;&#10;        progressBar.setMax(letters.length);&#10;&#10;        // Start background animations after views are ready&#10;        try {&#10;            startBackgroundAnimations();&#10;        } catch (Exception e) {&#10;            // Animations failed, but continue without them&#10;            e.printStackTrace();&#10;        }&#10;&#10;        tts = new TextToSpeech(this, status -&gt; {&#10;            if (status == TextToSpeech.SUCCESS) {&#10;                tts.setLanguage(getLocaleForLanguage(languageCode));&#10;                updateLetter();&#10;                if (isRecitalMode) {&#10;                    speakCurrentLetter();&#10;                }&#10;            } else {&#10;                Toast.makeText(this, &quot;TTS initialization failed&quot;, Toast.LENGTH_SHORT).show();&#10;                updateLetter();&#10;            }&#10;        });&#10;&#10;        btnNext.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnNext);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            currentIndex++;&#10;            if (currentIndex &gt;= letters.length) currentIndex = 0;&#10;            updateLetterWithAnimation();&#10;            if (isRecitalMode) speakCurrentLetter();&#10;        });&#10;&#10;        btnPrev.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnPrev);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            currentIndex--;&#10;            if (currentIndex &lt; 0) currentIndex = letters.length - 1;&#10;            updateLetterWithAnimation();&#10;            if (isRecitalMode) speakCurrentLetter();&#10;        });&#10;&#10;        btnBack.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnBack);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            finish();&#10;        });&#10;&#10;        btnSpeak.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnSpeak);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            if (isRecitalMode) {&#10;                speakCurrentLetter();&#10;            } else {&#10;                startPracticePronunciation();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void updateLetter() {&#10;        // Update text with letter and shadow&#10;        String letter = letters[currentIndex];&#10;        tvLetter.setText(letter);&#10;        if (tvLetterShadow != null) {&#10;            tvLetterShadow.setText(letter);&#10;        }&#10;        tvLetterWord.setText(words[currentIndex]);&#10;&#10;        // Update progress&#10;        progressBar.setProgress(currentIndex + 1);&#10;    }&#10;&#10;    private void updateLetterWithAnimation() {&#10;        // Animate letter change with smooth fade and scale&#10;        try {&#10;            animateLetterChange();&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;&#10;        // Update text with letter and shadow&#10;        String letter = letters[currentIndex];&#10;        tvLetter.setText(letter);&#10;        if (tvLetterShadow != null) {&#10;            tvLetterShadow.setText(letter);&#10;        }&#10;        tvLetterWord.setText(words[currentIndex]);&#10;&#10;        // Update progress&#10;        progressBar.setProgress(currentIndex + 1);&#10;&#10;        try {&#10;            animateProgressIcon();&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateLetter() {&#10;        try {&#10;            Animation letterAnim = AnimationUtils.loadAnimation(this, R.anim.letter_bounce);&#10;            tvLetter.startAnimation(letterAnim);&#10;            if (tvLetterShadow != null) {&#10;                tvLetterShadow.startAnimation(letterAnim);&#10;            }&#10;&#10;            // Animate word text&#10;            Animation wordAnim = AnimationUtils.loadAnimation(this, R.anim.fade_in);&#10;            tvLetterWord.startAnimation(wordAnim);&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void startBackgroundAnimations() {&#10;        try {&#10;            // Floating animations for decorative shapes&#10;            if (decorativeShape1 != null &amp;&amp; decorativeShape2 != null &amp;&amp;&#10;                decorativeShape3 != null &amp;&amp; decorativeShape4 != null) {&#10;                Animation float1 = AnimationUtils.loadAnimation(this, R.anim.floating_element);&#10;                Animation float2 = AnimationUtils.loadAnimation(this, R.anim.diagonal_drift);&#10;                Animation float3 = AnimationUtils.loadAnimation(this, R.anim.circular_orbit);&#10;                Animation float4 = AnimationUtils.loadAnimation(this, R.anim.zigzag_path);&#10;&#10;                float1.setStartOffset(0);&#10;                float2.setStartOffset(500);&#10;                float3.setStartOffset(1000);&#10;                float4.setStartOffset(1500);&#10;&#10;                decorativeShape1.startAnimation(float1);&#10;                decorativeShape2.startAnimation(float2);&#10;                decorativeShape3.startAnimation(float3);&#10;                decorativeShape4.startAnimation(float4);&#10;            }&#10;&#10;            // Animate language card icon&#10;            if (modeIcon != null) {&#10;                Animation pulse = AnimationUtils.loadAnimation(this, R.anim.pulse);&#10;                modeIcon.startAnimation(pulse);&#10;            }&#10;&#10;            // Animate progress icon&#10;            if (progressIcon != null) {&#10;                Animation sparkle = AnimationUtils.loadAnimation(this, R.anim.star_twinkle);&#10;                progressIcon.startAnimation(sparkle);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateButtonPress(android.view.View button) {&#10;        try {&#10;            if (button != null) {&#10;                Animation bounce = AnimationUtils.loadAnimation(this, R.anim.bounce_pop);&#10;                button.startAnimation(bounce);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateCardTransition() {&#10;        try {&#10;            if (letterCard != null) {&#10;                Animation slideOut = AnimationUtils.loadAnimation(this, R.anim.slide_up);&#10;                Animation slideIn = AnimationUtils.loadAnimation(this, R.anim.slide_in_bottom);&#10;&#10;                letterCard.startAnimation(slideOut);&#10;                slideOut.setAnimationListener(new Animation.AnimationListener() {&#10;                    @Override&#10;                    public void onAnimationStart(Animation animation) {}&#10;&#10;                    @Override&#10;                    public void onAnimationEnd(Animation animation) {&#10;                        letterCard.startAnimation(slideIn);&#10;                    }&#10;&#10;                    @Override&#10;                    public void onAnimationRepeat(Animation animation) {}&#10;                });&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateProgressIcon() {&#10;        try {&#10;            if (progressIcon != null) {&#10;                Animation bounce = AnimationUtils.loadAnimation(this, R.anim.bounce_pop);&#10;                progressIcon.startAnimation(bounce);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void speakCurrentLetter() {&#10;        String letter = letters[currentIndex];&#10;        int resId = getLetterAudioResId(languageCode, letter);&#10;        if (resId != 0) {&#10;            playAudioResource(resId);&#10;        } else if (tts != null) {&#10;            tts.speak(letter, TextToSpeech.QUEUE_FLUSH, null, &quot;LETTER_ID&quot;);&#10;        }&#10;        animateLetter();&#10;    }&#10;&#10;    private int getLetterAudioResId(String lang, String letter) {&#10;        if (lang == null || letter == null) return 0;&#10;        // Sanitize special characters for resource names&#10;        String sanitizedLetter = letter.replaceAll(&quot;[^a-zA-Z0-9]&quot;, &quot;&quot;).toLowerCase(Locale.ROOT);&#10;        if (sanitizedLetter.isEmpty()) return 0;&#10;        String fileName = lang.toLowerCase(Locale.ROOT) + &quot;_&quot; + sanitizedLetter;&#10;        return getResources().getIdentifier(fileName, &quot;raw&quot;, getPackageName());&#10;    }&#10;&#10;    private void playAudioResource(int resId) {&#10;        if (mediaPlayer != null) {&#10;            mediaPlayer.release();&#10;        }&#10;        mediaPlayer = MediaPlayer.create(this, resId);&#10;        mediaPlayer.setOnCompletionListener(mp -&gt; {&#10;            mp.release();&#10;            mediaPlayer = null;&#10;        });&#10;        mediaPlayer.start();&#10;    }&#10;&#10;    private void startPracticePronunciation() {&#10;        // Only support grading for English &amp; French&#10;        if (!(&quot;en&quot;.equals(languageCode) || &quot;fr&quot;.equals(languageCode))) {&#10;            Toast.makeText(this, &quot;Pronunciation grading is not yet available for &quot; + languageName, Toast.LENGTH_LONG).show();&#10;            speakCurrentLetter(); // still let them hear audio&#10;            return;&#10;        }&#10;&#10;        speakCurrentLetter();&#10;&#10;        if (!isRecordAudioPermissionGranted()) {&#10;            requestRecordAudioPermission();&#10;        } else {&#10;            promptSpeechInput();&#10;        }&#10;    }&#10;&#10;    private boolean isRecordAudioPermissionGranted() {&#10;        return ContextCompat.checkSelfPermission(this,&#10;                Manifest.permission.RECORD_AUDIO) == PackageManager.PERMISSION_GRANTED;&#10;    }&#10;&#10;    private void requestRecordAudioPermission() {&#10;        ActivityCompat.requestPermissions(this,&#10;                new String[]{Manifest.permission.RECORD_AUDIO},&#10;                REQ_CODE_RECORD_AUDIO);&#10;    }&#10;&#10;    private void promptSpeechInput() {&#10;        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);&#10;        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, getSpeechLocaleCode());&#10;        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,&#10;                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);&#10;        intent.putExtra(RecognizerIntent.EXTRA_PROMPT, &quot;Please repeat the letter&quot;);&#10;&#10;        try {&#10;            startActivityForResult(intent, REQ_CODE_SPEECH_INPUT);&#10;        } catch (Exception e) {&#10;            Toast.makeText(this, &quot;Speech recognition not supported on this device.&quot;, Toast.LENGTH_LONG).show();&#10;        }&#10;    }&#10;&#10;    private String getSpeechLocaleCode() {&#10;        if (&quot;fr&quot;.equals(languageCode)) return &quot;fr-FR&quot;;&#10;        // Add other language speech codes here if supported&#10;        return &quot;en-US&quot;;&#10;    }&#10;&#10;    private Locale getLocaleForLanguage(String code) {&#10;        if (code == null) return Locale.ENGLISH;&#10;        switch (code) {&#10;            case &quot;fr&quot;: return Locale.FRENCH;&#10;            case &quot;ak&quot;: return new Locale(&quot;ak&quot;);&#10;            case &quot;ee&quot;: return new Locale(&quot;ee&quot;);&#10;            case &quot;gaa&quot;: return new Locale(&quot;gaa&quot;);&#10;            default: return Locale.ENGLISH;&#10;        }&#10;    }&#10;&#10;    @Override&#10;    protected void onActivityResult(int requestCode, int resultCode, Intent data) {&#10;        super.onActivityResult(requestCode, resultCode, data);&#10;&#10;        if (requestCode == REQ_CODE_SPEECH_INPUT &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {&#10;            ArrayList&lt;String&gt; result = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);&#10;            if (result != null &amp;&amp; !result.isEmpty()) {&#10;                String recognized = result.get(0).trim();&#10;                evaluatePronunciation(recognized);&#10;            } else {&#10;                Toast.makeText(this, &quot;Could not hear you. Try again.&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;        }&#10;    }&#10;&#10;    private void evaluatePronunciation(String recognized) {&#10;        String expectedLetter = letters[currentIndex];&#10;&#10;        if (recognized.length() &gt; 0) {&#10;            String simplifiedRecognized = recognized.toUpperCase().substring(0, 1);&#10;&#10;            if (simplifiedRecognized.equals(expectedLetter)) {&#10;                Toast.makeText(this, &quot;Great! Pronunciation matched (&quot; + recognized + &quot;)&quot;, Toast.LENGTH_LONG).show();&#10;            } else {&#10;                Toast.makeText(this, &quot;It heard: \&quot;&quot; + recognized + &quot;\&quot;. Expected: &quot; + expectedLetter, Toast.LENGTH_LONG).show();&#10;            }&#10;        } else {&#10;            Toast.makeText(this, &quot;Could not detect any sound. Try again.&quot;, Toast.LENGTH_SHORT).show();&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void onRequestPermissionsResult(int requestCode,&#10;                                           @NonNull String[] permissions,&#10;                                           @NonNull int[] grantResults) {&#10;        super.onRequestPermissionsResult(requestCode, permissions, grantResults);&#10;        if (requestCode == REQ_CODE_RECORD_AUDIO) {&#10;            if (grantResults.length &gt; 0 &amp;&amp;&#10;                    grantResults[0] == PackageManager.PERMISSION_GRANTED) {&#10;                promptSpeechInput();&#10;            } else {&#10;                Toast.makeText(this, &quot;Microphone permission is needed for pronunciation practice.&quot;, Toast.LENGTH_LONG).show();&#10;            }&#10;        }&#10;    }&#10;&#10;    @Override&#10;    protected void onDestroy() {&#10;        super.onDestroy();&#10;        if (tts != null) {&#10;            tts.stop();&#10;            tts.shutdown();&#10;        }&#10;        if (mediaPlayer != null) {&#10;            mediaPlayer.stop();&#10;            mediaPlayer.release();&#10;            mediaPlayer = null;&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.edulinguaghana;&#10;&#10;import androidx.annotation.NonNull;&#10;import androidx.appcompat.app.AppCompatActivity;&#10;import androidx.core.app.ActivityCompat;&#10;import androidx.core.content.ContextCompat;&#10;&#10;import android.Manifest;&#10;import android.content.Intent;&#10;import android.content.pm.PackageManager;&#10;import android.media.MediaPlayer;&#10;import android.os.Bundle;&#10;import android.speech.RecognizerIntent;&#10;import android.speech.tts.TextToSpeech;&#10;import android.view.animation.Animation;&#10;import android.view.animation.AnimationUtils;&#10;import android.widget.ImageView;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import com.google.android.material.button.MaterialButton;&#10;import com.google.android.material.card.MaterialCardView;&#10;import com.google.android.material.floatingactionbutton.FloatingActionButton;&#10;import com.google.android.material.progressindicator.LinearProgressIndicator;&#10;&#10;import java.util.ArrayList;&#10;import java.util.Locale;&#10;&#10;public class AlphabetActivity extends AppCompatActivity {&#10;&#10;    private TextView tvLanguageTitle, tvLetter, tvLetterWord, tvLetterShadow;&#10;    private MaterialButton btnPrev, btnNext, btnSpeak;&#10;    private FloatingActionButton btnBack;&#10;    private LinearProgressIndicator progressBar;&#10;    private MaterialCardView letterCard, languageCard;&#10;    private ImageView decorativeShape1, decorativeShape2, decorativeShape3, decorativeShape4;&#10;    private ImageView progressIcon, languageIcon, modeIcon;&#10;&#10;    private String languageCode;&#10;    private String languageName;&#10;    private String mode;           // &quot;recital&quot; or &quot;practice&quot;&#10;    private boolean isRecitalMode;&#10;&#10;    private String[] letters;&#10;    private String[] words;&#10;    private int currentIndex = 0;&#10;&#10;    // --- ALPHABET &amp; WORD DATA ---&#10;    private final String[] lettersEnFr = {&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;,&quot;F&quot;,&quot;G&quot;,&quot;H&quot;,&quot;I&quot;,&quot;J&quot;,&quot;K&quot;,&quot;L&quot;,&quot;M&quot;,&quot;N&quot;,&quot;O&quot;,&quot;P&quot;,&quot;Q&quot;,&quot;R&quot;,&quot;S&quot;,&quot;T&quot;,&quot;U&quot;,&quot;V&quot;,&quot;W&quot;,&quot;X&quot;,&quot;Y&quot;,&quot;Z&quot;};&#10;    private final String[] wordsEn = {&quot;Apple&quot;, &quot;Ball&quot;, &quot;Cat&quot;, &quot;Dog&quot;, &quot;Elephant&quot;, &quot;Fish&quot;, &quot;Goat&quot;, &quot;Hat&quot;, &quot;Ice Cream&quot;, &quot;Jug&quot;, &quot;Kite&quot;, &quot;Lion&quot;, &quot;Monkey&quot;, &quot;Nose&quot;, &quot;Orange&quot;, &quot;Pen&quot;, &quot;Queen&quot;, &quot;Rainbow&quot;, &quot;Sun&quot;, &quot;Tiger&quot;, &quot;Umbrella&quot;, &quot;Violin&quot;, &quot;Watch&quot;, &quot;Xylophone&quot;, &quot;Yoyo&quot;, &quot;Zebra&quot;};&#10;    private final String[] wordsFr = {&quot;Avion&quot;, &quot;Bateau&quot;, &quot;Chien&quot;, &quot;Dauphin&quot;, &quot;Éléphant&quot;, &quot;Fleur&quot;, &quot;Girafe&quot;, &quot;Hibou&quot;, &quot;Île&quot;, &quot;Jardin&quot;, &quot;Kangourou&quot;, &quot;Lune&quot;, &quot;Maison&quot;, &quot;Nuage&quot;, &quot;Oiseau&quot;, &quot;Poisson&quot;, &quot;Quatre&quot;, &quot;Robot&quot;, &quot;Soleil&quot;, &quot;Train&quot;, &quot;Uniforme&quot;, &quot;Vache&quot;, &quot;Wagon&quot;, &quot;Xylophone&quot;, &quot;Yaourt&quot;, &quot;Zèbre&quot;};&#10;    private final String[] lettersAk = {&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;E&quot;, &quot;Ɛ&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;Ɔ&quot;, &quot;P&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;W&quot;, &quot;Y&quot;};&#10;    private final String[] wordsAk = {&quot;Akokɔ&quot;, &quot;Borɔdeɛ&quot;, &quot;Duku&quot;, &quot;Etuo&quot;, &quot;Ɛmo&quot;, &quot;Forosie&quot;, &quot;Gari&quot;, &quot;Hweaa&quot;, &quot;Isu&quot;, &quot;Kube&quot;, &quot;Lɔre&quot;, &quot;Maame&quot;, &quot;Nsuo&quot;, &quot;Odwan&quot;, &quot;Ɔkraman&quot;, &quot;Pono&quot;, &quot;Prako&quot;, &quot;Sika&quot;, &quot;Tɛkyerɛma&quot;, &quot;Uniwesiti&quot;, &quot;Wura&quot;, &quot;Yareɛ&quot;};&#10;    private final String[] lettersEe = {&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;Ɖ&quot;, &quot;E&quot;, &quot;Ɛ&quot;, &quot;F&quot;, &quot;Ƒ&quot;, &quot;G&quot;, &quot;Ɣ&quot;, &quot;H&quot;, &quot;X&quot;, &quot;I&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;Ŋ&quot;, &quot;O&quot;, &quot;Ɔ&quot;, &quot;P&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;Ʋ&quot;, &quot;W&quot;, &quot;Y&quot;, &quot;Z&quot;};&#10;    private final String[] wordsEe = {&quot;Ati&quot;, &quot;Baka&quot;, &quot;Dadi&quot;, &quot;Ɖevi&quot;, &quot;Eku&quot;, &quot;Ɛfu&quot;, &quot;Fia&quot;, &quot;Ƒo&quot;, &quot;Gbe&quot;, &quot;Ɣe&quot;, &quot;Ha&quot;, &quot;Xɔ&quot;, &quot;Iŋk&quot;, &quot;Kafu&quot;, &quot;Lá&quot;, &quot;Me&quot;, &quot;Nɔ&quot;, &quot;Ŋkɔ&quot;, &quot;Oyi&quot;, &quot;Ɔli&quot;, &quot;Papa&quot;, &quot;Rɛdio&quot;, &quot;Sɔ&quot;, &quot;Tɔ&quot;, &quot;Unilɔ&quot;, &quot;Vɔ&quot;, &quot;Ʋu&quot;, &quot;Wó&quot;, &quot;Yevú&quot;, &quot;Zã&quot;};&#10;    private final String[] lettersGaa = {&quot;A&quot;, &quot;B&quot;, &quot;D&quot;, &quot;E&quot;, &quot;Ɛ&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;Ŋ&quot;, &quot;O&quot;, &quot;Ɔ&quot;, &quot;P&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;Y&quot;, &quot;Z&quot;};&#10;    private final String[] wordsGaa = {&quot;Akekā&quot;, &quot;Blɔfo&quot;, &quot;Dade&quot;, &quot;Enɔ&quot;, &quot;Ɛlɛ&quot;, &quot;Fio&quot;, &quot;Gbekɛ&quot;, &quot;Hejɔ&quot;, &quot;Iŋk&quot;, &quot;Klala&quot;, &quot;Lala&quot;, &quot;Maŋ&quot;, &quot;Nuu&quot;, &quot;Ŋmã&quot;, &quot;Okpɔtɔ&quot;, &quot;Ɔɔso&quot;, &quot;Papa&quot;, &quot;Sohaa&quot;, &quot;Tee&quot;, &quot;Wala&quot;, &quot;Vinɔ&quot;, &quot;Wɔ&quot;, &quot;Yoomo&quot;, &quot;Zigidi&quot;};&#10;&#10;    private TextToSpeech tts;&#10;    private MediaPlayer mediaPlayer;&#10;&#10;    private static final int REQ_CODE_SPEECH_INPUT = 100;&#10;    private static final int REQ_CODE_RECORD_AUDIO = 200;&#10;&#10;    @Override&#10;    protected void onCreate(Bundle savedInstanceState) {&#10;        super.onCreate(savedInstanceState);&#10;        setContentView(R.layout.activity_alphabet);&#10;&#10;        // Initialize text views&#10;        tvLanguageTitle = findViewById(R.id.tvLanguageTitle);&#10;        tvLetter = findViewById(R.id.tvLetter);&#10;        tvLetterWord = findViewById(R.id.tvLetterWord);&#10;        tvLetterShadow = findViewById(R.id.tvLetterShadow);&#10;&#10;        // Initialize buttons&#10;        btnPrev = findViewById(R.id.btnPrev);&#10;        btnNext = findViewById(R.id.btnNext);&#10;        btnBack = findViewById(R.id.btnBack);&#10;        btnSpeak = findViewById(R.id.btnSpeak);&#10;&#10;        // Initialize other views&#10;        progressBar = findViewById(R.id.progressBar);&#10;        letterCard = findViewById(R.id.letterCard);&#10;        languageCard = findViewById(R.id.languageCard);&#10;&#10;        // Initialize decorative elements&#10;        decorativeShape1 = findViewById(R.id.decorativeShape1);&#10;        decorativeShape2 = findViewById(R.id.decorativeShape2);&#10;        decorativeShape3 = findViewById(R.id.decorativeShape3);&#10;        decorativeShape4 = findViewById(R.id.decorativeShape4);&#10;        progressIcon = findViewById(R.id.progressIcon);&#10;        languageIcon = findViewById(R.id.languageIcon);&#10;        modeIcon = findViewById(R.id.modeIcon);&#10;&#10;&#10;        languageCode = getIntent().getStringExtra(&quot;LANG_CODE&quot;);&#10;        languageName = getIntent().getStringExtra(&quot;LANG_NAME&quot;);&#10;        mode = getIntent().getStringExtra(&quot;MODE&quot;);&#10;&#10;        if (languageName == null) languageName = &quot;Unknown&quot;;&#10;        if (mode == null) mode = &quot;practice&quot;;&#10;&#10;        isRecitalMode = mode.equals(&quot;recital&quot;);&#10;&#10;        tvLanguageTitle.setText(&quot;Language: &quot; + languageName);&#10;        btnSpeak.setText(isRecitalMode ? &quot;Repeat&quot; : &quot;Practice&quot;);&#10;&#10;        // --- DYNAMICALLY SET ALPHABET &amp; WORDS ---&#10;        switch (languageCode) {&#10;            case &quot;ak&quot;:&#10;                letters = lettersAk;&#10;                words = wordsAk;&#10;                break;&#10;            case &quot;ee&quot;:&#10;                letters = lettersEe;&#10;                words = wordsEe;&#10;                break;&#10;            case &quot;gaa&quot;:&#10;                letters = lettersGaa;&#10;                words = wordsGaa;&#10;                break;&#10;            case &quot;fr&quot;:&#10;                letters = lettersEnFr;&#10;                words = wordsFr;&#10;                break;&#10;            default: // &quot;en&quot; and any other case&#10;                letters = lettersEnFr;&#10;                words = wordsEn;&#10;                break;&#10;        }&#10;&#10;        progressBar.setMax(letters.length);&#10;&#10;        // Start background animations after views are ready&#10;        try {&#10;            startBackgroundAnimations();&#10;        } catch (Exception e) {&#10;            // Animations failed, but continue without them&#10;            e.printStackTrace();&#10;        }&#10;&#10;        tts = new TextToSpeech(this, status -&gt; {&#10;            if (status == TextToSpeech.SUCCESS) {&#10;                tts.setLanguage(getLocaleForLanguage(languageCode));&#10;                updateLetter();&#10;                if (isRecitalMode) {&#10;                    speakCurrentLetter();&#10;                }&#10;            } else {&#10;                Toast.makeText(this, &quot;TTS initialization failed&quot;, Toast.LENGTH_SHORT).show();&#10;                updateLetter();&#10;            }&#10;        });&#10;&#10;        btnNext.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnNext);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            currentIndex++;&#10;            if (currentIndex &gt;= letters.length) currentIndex = 0;&#10;            updateLetterWithAnimation();&#10;            if (isRecitalMode) speakCurrentLetter();&#10;        });&#10;&#10;        btnPrev.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnPrev);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            currentIndex--;&#10;            if (currentIndex &lt; 0) currentIndex = letters.length - 1;&#10;            updateLetterWithAnimation();&#10;            if (isRecitalMode) speakCurrentLetter();&#10;        });&#10;&#10;        btnBack.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnBack);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            finish();&#10;        });&#10;&#10;        btnSpeak.setOnClickListener(v -&gt; {&#10;            try {&#10;                animateButtonPress(btnSpeak);&#10;            } catch (Exception e) {&#10;                e.printStackTrace();&#10;            }&#10;            if (isRecitalMode) {&#10;                speakCurrentLetter();&#10;            } else {&#10;                startPracticePronunciation();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void updateLetter() {&#10;        // Update text with letter and shadow&#10;        String letter = letters[currentIndex];&#10;        tvLetter.setText(letter);&#10;        if (tvLetterShadow != null) {&#10;            tvLetterShadow.setText(letter);&#10;        }&#10;        tvLetterWord.setText(words[currentIndex]);&#10;&#10;        // Update progress&#10;        progressBar.setProgress(currentIndex + 1);&#10;    }&#10;&#10;    private void updateLetterWithAnimation() {&#10;        // Animate letter change with smooth fade and scale&#10;        try {&#10;            animateLetterChange();&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;&#10;        // Update text with letter and shadow&#10;        String letter = letters[currentIndex];&#10;        tvLetter.setText(letter);&#10;        if (tvLetterShadow != null) {&#10;            tvLetterShadow.setText(letter);&#10;        }&#10;        tvLetterWord.setText(words[currentIndex]);&#10;&#10;        // Update progress&#10;        progressBar.setProgress(currentIndex + 1);&#10;&#10;        try {&#10;            animateProgressIcon();&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateLetter() {&#10;        try {&#10;            Animation letterAnim = AnimationUtils.loadAnimation(this, R.anim.letter_bounce);&#10;            tvLetter.startAnimation(letterAnim);&#10;            if (tvLetterShadow != null) {&#10;                tvLetterShadow.startAnimation(letterAnim);&#10;            }&#10;&#10;            // Animate word text&#10;            Animation wordAnim = AnimationUtils.loadAnimation(this, R.anim.fade_in);&#10;            tvLetterWord.startAnimation(wordAnim);&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void startBackgroundAnimations() {&#10;        try {&#10;            // Floating animations for decorative shapes&#10;            if (decorativeShape1 != null &amp;&amp; decorativeShape2 != null &amp;&amp;&#10;                decorativeShape3 != null &amp;&amp; decorativeShape4 != null) {&#10;                Animation float1 = AnimationUtils.loadAnimation(this, R.anim.floating_element);&#10;                Animation float2 = AnimationUtils.loadAnimation(this, R.anim.diagonal_drift);&#10;                Animation float3 = AnimationUtils.loadAnimation(this, R.anim.circular_orbit);&#10;                Animation float4 = AnimationUtils.loadAnimation(this, R.anim.zigzag_path);&#10;&#10;                float1.setStartOffset(0);&#10;                float2.setStartOffset(500);&#10;                float3.setStartOffset(1000);&#10;                float4.setStartOffset(1500);&#10;&#10;                decorativeShape1.startAnimation(float1);&#10;                decorativeShape2.startAnimation(float2);&#10;                decorativeShape3.startAnimation(float3);&#10;                decorativeShape4.startAnimation(float4);&#10;            }&#10;&#10;            // Animate language card icon&#10;            if (modeIcon != null) {&#10;                Animation pulse = AnimationUtils.loadAnimation(this, R.anim.pulse);&#10;                modeIcon.startAnimation(pulse);&#10;            }&#10;&#10;            // Animate progress icon&#10;            if (progressIcon != null) {&#10;                Animation sparkle = AnimationUtils.loadAnimation(this, R.anim.star_twinkle);&#10;                progressIcon.startAnimation(sparkle);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateButtonPress(android.view.View button) {&#10;        try {&#10;            if (button != null) {&#10;                Animation bounce = AnimationUtils.loadAnimation(this, R.anim.bounce_pop);&#10;                button.startAnimation(bounce);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateLetterChange() {&#10;        try {&#10;            if (tvLetter != null &amp;&amp; tvLetterWord != null) {&#10;                // Create smooth scale and fade animation&#10;                tvLetter.animate()&#10;                    .scaleX(0.8f)&#10;                    .scaleY(0.8f)&#10;                    .alpha(0.5f)&#10;                    .setDuration(100)&#10;                    .withEndAction(() -&gt; {&#10;                        tvLetter.animate()&#10;                            .scaleX(1.0f)&#10;                            .scaleY(1.0f)&#10;                            .alpha(1.0f)&#10;                            .setDuration(150)&#10;                            .start();&#10;                    })&#10;                    .start();&#10;&#10;                // Fade word&#10;                tvLetterWord.animate()&#10;                    .alpha(0f)&#10;                    .setDuration(100)&#10;                    .withEndAction(() -&gt; {&#10;                        tvLetterWord.animate()&#10;                            .alpha(1f)&#10;                            .setDuration(150)&#10;                            .start();&#10;                    })&#10;                    .start();&#10;                    &#10;                // Also animate shadow if available&#10;                if (tvLetterShadow != null) {&#10;                    tvLetterShadow.animate()&#10;                        .scaleX(0.8f)&#10;                        .scaleY(0.8f)&#10;                        .alpha(0.1f)&#10;                        .setDuration(100)&#10;                        .withEndAction(() -&gt; {&#10;                            tvLetterShadow.animate()&#10;                                .scaleX(1.0f)&#10;                                .scaleY(1.0f)&#10;                                .alpha(0.15f)&#10;                                .setDuration(150)&#10;                                .start();&#10;                        })&#10;                        .start();&#10;                }&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void animateProgressIcon() {&#10;        try {&#10;            if (progressIcon != null) {&#10;                Animation bounce = AnimationUtils.loadAnimation(this, R.anim.bounce_pop);&#10;                progressIcon.startAnimation(bounce);&#10;            }&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    private void speakCurrentLetter() {&#10;        String letter = letters[currentIndex];&#10;        int resId = getLetterAudioResId(languageCode, letter);&#10;        if (resId != 0) {&#10;            playAudioResource(resId);&#10;        } else if (tts != null) {&#10;            tts.speak(letter, TextToSpeech.QUEUE_FLUSH, null, &quot;LETTER_ID&quot;);&#10;        }&#10;        animateLetter();&#10;    }&#10;&#10;    private int getLetterAudioResId(String lang, String letter) {&#10;        if (lang == null || letter == null) return 0;&#10;        // Sanitize special characters for resource names&#10;        String sanitizedLetter = letter.replaceAll(&quot;[^a-zA-Z0-9]&quot;, &quot;&quot;).toLowerCase(Locale.ROOT);&#10;        if (sanitizedLetter.isEmpty()) return 0;&#10;        String fileName = lang.toLowerCase(Locale.ROOT) + &quot;_&quot; + sanitizedLetter;&#10;        return getResources().getIdentifier(fileName, &quot;raw&quot;, getPackageName());&#10;    }&#10;&#10;    private void playAudioResource(int resId) {&#10;        if (mediaPlayer != null) {&#10;            mediaPlayer.release();&#10;        }&#10;        mediaPlayer = MediaPlayer.create(this, resId);&#10;        mediaPlayer.setOnCompletionListener(mp -&gt; {&#10;            mp.release();&#10;            mediaPlayer = null;&#10;        });&#10;        mediaPlayer.start();&#10;    }&#10;&#10;    private void startPracticePronunciation() {&#10;        // Only support grading for English &amp; French&#10;        if (!(&quot;en&quot;.equals(languageCode) || &quot;fr&quot;.equals(languageCode))) {&#10;            Toast.makeText(this, &quot;Pronunciation grading is not yet available for &quot; + languageName, Toast.LENGTH_LONG).show();&#10;            speakCurrentLetter(); // still let them hear audio&#10;            return;&#10;        }&#10;&#10;        speakCurrentLetter();&#10;&#10;        if (!isRecordAudioPermissionGranted()) {&#10;            requestRecordAudioPermission();&#10;        } else {&#10;            promptSpeechInput();&#10;        }&#10;    }&#10;&#10;    private boolean isRecordAudioPermissionGranted() {&#10;        return ContextCompat.checkSelfPermission(this,&#10;                Manifest.permission.RECORD_AUDIO) == PackageManager.PERMISSION_GRANTED;&#10;    }&#10;&#10;    private void requestRecordAudioPermission() {&#10;        ActivityCompat.requestPermissions(this,&#10;                new String[]{Manifest.permission.RECORD_AUDIO},&#10;                REQ_CODE_RECORD_AUDIO);&#10;    }&#10;&#10;    private void promptSpeechInput() {&#10;        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);&#10;        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, getSpeechLocaleCode());&#10;        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,&#10;                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);&#10;        intent.putExtra(RecognizerIntent.EXTRA_PROMPT, &quot;Please repeat the letter&quot;);&#10;&#10;        try {&#10;            startActivityForResult(intent, REQ_CODE_SPEECH_INPUT);&#10;        } catch (Exception e) {&#10;            Toast.makeText(this, &quot;Speech recognition not supported on this device.&quot;, Toast.LENGTH_LONG).show();&#10;        }&#10;    }&#10;&#10;    private String getSpeechLocaleCode() {&#10;        if (&quot;fr&quot;.equals(languageCode)) return &quot;fr-FR&quot;;&#10;        // Add other language speech codes here if supported&#10;        return &quot;en-US&quot;;&#10;    }&#10;&#10;    private Locale getLocaleForLanguage(String code) {&#10;        if (code == null) return Locale.ENGLISH;&#10;        switch (code) {&#10;            case &quot;fr&quot;: return Locale.FRENCH;&#10;            case &quot;ak&quot;: return new Locale(&quot;ak&quot;);&#10;            case &quot;ee&quot;: return new Locale(&quot;ee&quot;);&#10;            case &quot;gaa&quot;: return new Locale(&quot;gaa&quot;);&#10;            default: return Locale.ENGLISH;&#10;        }&#10;    }&#10;&#10;    @Override&#10;    protected void onActivityResult(int requestCode, int resultCode, Intent data) {&#10;        super.onActivityResult(requestCode, resultCode, data);&#10;&#10;        if (requestCode == REQ_CODE_SPEECH_INPUT &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {&#10;            ArrayList&lt;String&gt; result = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);&#10;            if (result != null &amp;&amp; !result.isEmpty()) {&#10;                String recognized = result.get(0).trim();&#10;                evaluatePronunciation(recognized);&#10;            } else {&#10;                Toast.makeText(this, &quot;Could not hear you. Try again.&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;        }&#10;    }&#10;&#10;    private void evaluatePronunciation(String recognized) {&#10;        String expectedLetter = letters[currentIndex];&#10;&#10;        if (recognized.length() &gt; 0) {&#10;            String simplifiedRecognized = recognized.toUpperCase().substring(0, 1);&#10;&#10;            if (simplifiedRecognized.equals(expectedLetter)) {&#10;                Toast.makeText(this, &quot;Great! Pronunciation matched (&quot; + recognized + &quot;)&quot;, Toast.LENGTH_LONG).show();&#10;            } else {&#10;                Toast.makeText(this, &quot;It heard: \&quot;&quot; + recognized + &quot;\&quot;. Expected: &quot; + expectedLetter, Toast.LENGTH_LONG).show();&#10;            }&#10;        } else {&#10;            Toast.makeText(this, &quot;Could not detect any sound. Try again.&quot;, Toast.LENGTH_SHORT).show();&#10;        }&#10;    }&#10;&#10;    @Override&#10;    public void onRequestPermissionsResult(int requestCode,&#10;                                           @NonNull String[] permissions,&#10;                                           @NonNull int[] grantResults) {&#10;        super.onRequestPermissionsResult(requestCode, permissions, grantResults);&#10;        if (requestCode == REQ_CODE_RECORD_AUDIO) {&#10;            if (grantResults.length &gt; 0 &amp;&amp;&#10;                    grantResults[0] == PackageManager.PERMISSION_GRANTED) {&#10;                promptSpeechInput();&#10;            } else {&#10;                Toast.makeText(this, &quot;Microphone permission is needed for pronunciation practice.&quot;, Toast.LENGTH_LONG).show();&#10;            }&#10;        }&#10;    }&#10;&#10;    @Override&#10;    protected void onDestroy() {&#10;        super.onDestroy();&#10;        if (tts != null) {&#10;            tts.stop();&#10;            tts.shutdown();&#10;        }&#10;        if (mediaPlayer != null) {&#10;            mediaPlayer.stop();&#10;            mediaPlayer.release();&#10;            mediaPlayer = null;&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>